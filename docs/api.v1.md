# API v1

## Session

### GET `api/session/me`
Получить текущий идентификатор сессии (`X-Session-Id`).
Если заголовок отсутствует — сервер создаёт новый `X-Session-Id` и возвращает его в ответе.

**Headers**
| Заголовок | Тип | Обязательно | Описание |
|------------|-----|--------------|-----------|
| `X-Session-Id` | string | Нет | Уникальный идентификатор сессии пользователя. Если не передан — сервер создаёт новый. |

**Response 200**
```json
{
  "session_id": "sess_5zQ0nVrN8e8SxA1TqFlJxQ"
}
```

**Response Headers**
| Заголовок | Описание |
|------------|-----------|
| `X-Session-Id` | Текущий идентификатор сессии (новый или существующий) |

## Files

### POST `/api/files/upload`
Загрузить файл на сервер.

**Headers**
| Заголовок | Тип | Обязательно | Описание |
|------------|-----|--------------|-----------|
| `X-Session-Id` | string | Нет | Уникальный идентификатор сессии пользователя. Если не передан — сервер создаёт новый. |

**Query params**
| Параметр     | Тип    | Обязательно | Описание |
|--------------|--------|-------------|----------|
| `as_name`    | string | Нет | Имя, под которым сохранить файл |

**Form-data**
| Параметр | Тип  | Обязательно | Описание |
|----------|------|-------------|----------|
| `file`   | file | Да | Загружаемый бинарный файл |

**Response 200**
```json
{
  "session_id": "sess_5zQ0nVrN8e8SxA1TqFlJxQ",
  "file_name": "report.bin",
  "stored_name": "8f3a..._report.bin",
  "size_bytes": 1048576,
  "download_url": "/api/files/download?session_id=sess_5zQ0nVrN8e8SxA1TqFlJxQ&stored_name=8f3a..._report.bin"
}
```

---

### GET `/api/files/download`
Скачать файл по `stored_name`.

**Headers**
| Заголовок | Тип | Обязательно | Описание |
|------------|-----|--------------|-----------|
| `X-Session-Id` | string | Нет | Уникальный идентификатор сессии пользователя. Если не передан — сервер создаёт новый. |

**Query params**
| Параметр      | Тип    | Обязательно | Описание |
|---------------|--------|-------------|----------|
| `stored_name` | string | Да  | Уникальное имя файла (из upload-ответа) |
| `download_as` | string | Нет | Имя файла при скачивании |

**Response 200**
- Бинарный поток файла (`application/octet-stream`).

**Response 404**
```json
{
  "error": "Файл не найден"
}
```

---

### DELETE `/api/files/delete`
Удалить файл по `stored_name`.

**Headers**
| Заголовок | Тип | Обязательно | Описание |
|------------|-----|--------------|-----------|
| `X-Session-Id` | string | Нет | Уникальный идентификатор сессии пользователя. Если не передан — сервер создаёт новый. |

**Query params**
| Параметр      | Тип    | Обязательно | Описание |
|---------------|--------|-------------|----------|
| `stored_name` | string | Да | Уникальное имя файла (из upload-ответа) |

**Response 200**
```json
{
  "session_id": "sess_5zQ0nVrN8e8SxA1TqFlJxQ",
  "stored_name": "8f3a..._report.bin",
  "deleted": true,
  "size_bytes": 1048576
}
```

**Response 404**
```json
{
  "error": "Файл не найден"
}
```
